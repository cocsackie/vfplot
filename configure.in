dnl Process this file with autoconf to produce a configure script.
dnl $Id: configure.in,v 1.36 2007/10/07 18:50:13 jjg Exp jjg $

AC_INIT(src/vfplot/main.c)

MAJOR_VERSION=0
MINOR_VERSION=9.1
VERSION="$MAJOR_VERSION.$MINOR_VERSION"

AC_PROG_CC

if eval "test $GCC"; then
  CFLAGS="$CFLAGS -Wall"
fi

AC_PROG_MAKE_SET
AC_PROG_INSTALL

AC_PATH_PROG(GGO,gengetopt)

AC_HEADER_STDC

AC_CHECK_HEADER(sys/time.h)
AC_CHECK_HEADER(sys/resource.h)
AC_CHECK_HEADER(netcdf.h)

AC_CHECK_LIB(m,sin)
AC_CHECK_LIB(m,sincos)
AC_CHECK_LIB(netcdf,nc_open)
AC_CHECK_LIB(cunit,CU_add_test)

AC_CHECK_FUNCS(sincos)
AC_CHECK_FUNCS(getrusage)

dnl obsolete, we always use kdtree

AC_SUBST(NBODY)
AC_ARG_ENABLE(triangle,
        AC_HELP_STRING([--enable-triangle],[Use Shewchuck's triangulation library]),
        [NBODY=triangle],[NBODY=kdtree])

dnl use dmalloc (for malloc debugging) 

AC_ARG_ENABLE(dmalloc,
        AC_HELP_STRING([--enable-dmalloc],[use dmalloc memory checker (default is NO)]),
        [AC_DEFINE(USE_DMALLOC,1,[Define to 1 to use the dmalloc library]) 
	AC_CHECK_HEADER(dmalloc.h)
	AC_CHECK_LIB(dmalloc,malloc)])

AC_SUBST(INSTALL_PROGRAM)
AC_SUBST(INSTALL_DATA)
AC_SUBST(VERSION)

AC_CONFIG_HEADER(src/include/config.h)

AC_OUTPUT([Makefile src/Common.mk])






